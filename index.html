<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>태국 가계부 by 후니 🇹🇭</title>
    
    <script>
        const url = location.href;
        if (/KAKAOTALK/i.test(navigator.userAgent)) {
            location.href = 'kakaotalk://web/openExternal?url=' + encodeURIComponent(url);
        }
    </script>
    
    <link rel="stylesheet" href="style.css?v=1.7">
    
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <h1>🇹🇭 태국 가계부 by 후니</h1>
        
        <div class="input-section">
            <select id="category" class="category-select">
                <option value="교통">🚗 교통</option>
                <option value="먹거리">🍕 먹거리</option>
                <option value="숙박">🏨 숙박</option>
                <option value="관광">📸 관광</option>
                <option value="기타" selected>💡 기타</option>
            </select>
            <input type="text" id="content" placeholder="무엇을 샀나요? (예: 팟타이)">
            <div class="currency-toggle">
                <label><input type="radio" name="currency" value="baht" checked> ฿ 바트</label>
                <label><input type="radio" name="currency" value="won"> ₩ 원화</label>
            </div>
            <input type="number" id="amount" placeholder="금액을 입력하세요">
            
            <button onclick="saveData()" class="add-btn">내역 추가</button>

            <div class="chart-section">
                <button id="toggle-chart-btn" onclick="toggleChart()" class="toggle-btn">📊 카테고리별 통계 보기</button>
                <div id="chart-container" class="chart-container" style="display: none;">
                    </div>
            </div>
            
            <div class="export-group">
                <button onclick="exportToExcel()" class="excel-btn">Excel 저장</button>
                <button onclick="exportToPDF()" class="pdf-btn">PDF 저장 (바로보기)</button>
            </div>
        </div>

        <div class="list-section" id="print-area">
            <div class="list-header">
                <h3>최신 지출 내역</h3>
                <div class="total-box">
                    합계: <span id="total-won">0</span> 원
                    <div id="total-baht-sub" class="sub-total"></div>
                </div>
            </div>
            <div id="history-list"></div>
        </div>
    </div>

    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3>내역 수정</h3>
            <select id="edit-category" class="category-select">
                <option value="교통">🚗 교통</option>
                <option value="먹거리">🍕 먹거리</option>
                <option value="숙박">🏨 숙박</option>
                <option value="관광">📸 관광</option>
                <option value="기타">💡 기타</option>
            </select>
            <input type="text" id="edit-content" placeholder="내용">
            <input type="datetime-local" id="edit-time">
            <div class="currency-toggle">
                <label><input type="radio" name="edit-currency" value="baht"> ฿ 바트</label>
                <label><input type="radio" name="edit-currency" value="won"> ₩ 원화</label>
            </div>
            <input type="number" id="edit-amount" placeholder="금액">
            <div class="modal-btns">
                <button onclick="updateData()" class="save-btn">수정 완료</button>
                <button onclick="closeModal()" class="cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <script src="script.js?v=1.7"></script>
</body>
</html>